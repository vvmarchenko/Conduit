{"version":3,"sources":["types/profile.ts","types/article.ts","types/comment.ts","types/error.ts","types/object.ts","components/App/App.slice.ts","components/Pages/Home/Home.slice.ts","components/Pages/Login/Login.slice.ts","components/Pages/Settings/Settings.slice.ts","components/Pages/Register/Register.slice.ts","components/ArticleEditor/ArticleEditor.slice.tsx","components/ArticlesViewer/ArticlesViewer.slice.ts","components/Pages/ProfilePage/ProfilePage.slice.ts","components/Pages/ArticlePage/ArticlePage.slice.ts","state/store.ts","types/user.ts","services/conduit.ts","state/storeHooks.ts","types/genericFormField.tsx","config/settings.ts","components/ContainerPage/ContainerPage.tsx","components/FormGroup/FormGroup.tsx","components/Errors/Errors.tsx","components/GenericForm/GenericForm.tsx","components/ArticleEditor/ArticleEditor.tsx","components/Pages/EditArticle/EditArticle.tsx","components/Footer/Footer.tsx","components/Header/Header.tsx","types/style.ts","components/ArticlePreview/ArticlePreview.tsx","components/Pagination/Pagination.tsx","components/ArticlesViewer/ArticlesViewer.tsx","components/Pages/Home/Home.tsx","components/Pages/Login/Login.tsx","components/Pages/NewArticle/NewArticle.tsx","components/Pages/Register/Register.tsx","components/Pages/Settings/Settings.tsx","types/location.ts","components/UserInfo/UserInfo.tsx","components/Pages/ProfilePage/ProfilePage.tsx","components/Pages/ArticlePage/ArticlePage.tsx","components/App/App.tsx","index.tsx"],"names":["profileDecoder","object","username","string","bio","nullable","image","following","either","boolean","hardcoded","articleDecoder","slug","title","description","body","tagList","array","createdAt","iso8601","updatedAt","favorited","favoritesCount","number","author","multipleArticlesDecoder","articles","articlesCount","commentDecoder","id","genericErrorsDecoder","dict","objectToQueryString","Object","entries","map","key","value","join","initialState","user","None","loading","slice","createSlice","name","reducers","initializeApp","loadUser","state","payload","Some","logout","endLoad","actions","tags","selectedTab","startLoadingTags","loadTags","changeTab","tab","email","password","errors","loginIn","initializeLogin","updateField","updateErrors","startLoginIn","updating","initializeSettings","startUpdate","extraReducers","type","R","signingUp","initializeRegister","startSigningUp","article","tag","submitting","initializeEditor","startSubmitting","addTag","length","push","removeTag","index","loadArticle","currentPage","startLoadingArticles","loadArticles","isSubmitting","startSubmittingFavorite","endSubmittingFavorite","changePage","page","profile","initializeProfile","loadProfile","commentSection","comments","commentBody","submittingComment","metaSection","submittingFavorite","submittingFollow","deletingArticle","initializeArticlePage","loadComments","updateAuthor","startSubmittingFollow","updateCommentBody","startSubmittingComment","startDeletingArticle","middlewareConfiguration","serializableCheck","store","configureStore","reducer","app","home","login","settings","register","editor","articleViewer","articlePage","devTools","middleware","getDefaultMiddleware","dispatchOnCall","action","dispatch","userDecoder","token","loadUserIntoApp","localStorage","setItem","axios","defaults","headers","Authorization","getArticles","a","filters","finalFilters","limit","offset","guard","get","data","getTags","post","Ok","response","Err","getUser","favoriteArticle","unfavoriteArticle","delete","updateSettings","put","signUp","createArticle","getArticle","updateArticle","getProfile","followUser","unfollowUser","getFeed","getArticleComments","deleteComment","commentId","createComment","comment","deleteArticle","useStoreWithInitializer","getter","initializer","useState","getState","setState","useEffect","unsubscribe","subscribe","useStore","buildGenericFormField","placeholder","fieldType","lg","baseURL","ContainerPage","children","className","FormGroup","disabled","onChange","TextAreaFormGroup","rows","ListFormGroup","listValue","onEnter","onRemoveItem","onKeyDown","ev","preventDefault","onKeyUp","onListFieldKeyUp","onClick","Errors","field","fieldError","GenericForm","fields","formObject","submitButtonText","onSubmit","onAddItemToList","onRemoveListItem","onUpdateField","listName","target","ArticleEditor","onAddTag","onRemoveTag","_","EditArticle","useParams","_loadArticle","unwrap","location","hash","match","err","ok","Footer","href","Header","NavItem","text","none","GuestLinks","some","UserLinks","icon","exact","to","activeClassName","classObjectToClassName","obj","filter","ArticlePreview","onFavoriteToggle","src","undefined","format","TagList","Pagination","count","itemsPerPage","onPageChange","Math","ceil","range","ArticlesViewer","toggleClassName","tabs","onTabChange","ArticlesTabSet","ArticleList","Tab","active","isNone","Home","load","buildTabsNames","HomeSidebar","isSome","getFeedOrGlobalArticles","multipleArticles","tagsResult","Array","from","Set","startsWith","Login","signIn","e","NewArticle","Register","onSignUp","Settings","onUpdateSettings","_logout","removeItem","redirect","path","UserInfo","onFollowToggle","onEditSettings","sessionUsername","x","unwrapOr","EditProfileButton","ToggleFollowButton","ProfilePage","favorites","useLocation","pathname","endsWith","onLoad","getArticlesByType","newProfile","ArticlePage","ArticlePageBanner","ArticleMeta","CommentSection","props","ArticleAuthorInfo","OwnerArticleMetaActions","NonOwnerArticleMetaActions","btn","onFollow","onFavorite","onDeleteArticle","style","display","CommentForm","ArticleComment","onPostComment","onCommentChange","onDeleteComment","App","userIsLogged","GuestOnlyRoute","UserOnlyRoute","getItem","rest","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.23cb1f48.chunk.js","sourcesContent":["import { Decoder, string, nullable, boolean, object, hardcoded, either } from 'decoders';\nimport { PublicUser } from './user';\n\nexport interface Profile extends PublicUser {\n  following: boolean;\n}\n\nexport const profileDecoder: Decoder<Profile> = object({\n  username: string,\n  bio: nullable(string),\n  image: nullable(string),\n  following: either(boolean, hardcoded(false)),\n});\n","import { array, boolean, Decoder, iso8601, number, object, string } from 'decoders';\nimport { Profile, profileDecoder } from './profile';\n\nexport interface Article {\n  slug: string;\n  title: string;\n  description: string;\n  body: string;\n  tagList: string[];\n  createdAt: Date;\n  updatedAt: Date;\n  favorited: boolean;\n  favoritesCount: number;\n  author: Profile;\n}\n\nexport const articleDecoder: Decoder<Article> = object({\n  slug: string,\n  title: string,\n  description: string,\n  body: string,\n  tagList: array(string),\n  createdAt: iso8601,\n  updatedAt: iso8601,\n  favorited: boolean,\n  favoritesCount: number,\n  author: profileDecoder,\n});\n\nexport interface MultipleArticles {\n  articles: Article[];\n  articlesCount: number;\n}\n\nexport const multipleArticlesDecoder: Decoder<MultipleArticles> = object({\n  articles: array(articleDecoder),\n  articlesCount: number,\n});\n\nexport interface ArticleForEditor {\n  title: string;\n  description: string;\n  body: string;\n  tagList: string[];\n}\n\nexport interface ArticlesFilters {\n  tag?: string;\n  author?: string;\n  favorited?: string;\n  limit?: number;\n  offset?: number;\n}\n\nexport interface FeedFilters {\n  limit?: number;\n  offset?: number;\n}\n","import { Decoder, iso8601, number, object, string } from 'decoders';\nimport { Profile, profileDecoder } from './profile';\n\nexport interface Comment {\n  id: number;\n  createdAt: Date;\n  updatedAt: Date;\n  body: string;\n  author: Profile;\n}\n\nexport const commentDecoder: Decoder<Comment> = object({\n  id: number,\n  createdAt: iso8601,\n  updatedAt: iso8601,\n  body: string,\n  author: profileDecoder,\n});\n","import { array, dict, string } from 'decoders';\n\nexport type GenericErrors = Record<string, string[]>;\n\nexport const genericErrorsDecoder = dict(array(string));\n","export function objectToQueryString<T, V>(object: Partial<Record<keyof T, V>>): string {\n  return Object.entries(object)\n    .map(([key, value]) => `${key}=${value}`)\n    .join('&');\n}\n","import { None, Option, Some } from '@hqoss/monads';\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { User } from '../../types/user';\n\nexport interface AppState {\n  user: Option<User>;\n  loading: boolean;\n}\n\nconst initialState: AppState = {\n  user: None,\n  loading: true,\n};\n\nconst slice = createSlice({\n  name: 'app',\n  initialState,\n  reducers: {\n    initializeApp: () => initialState,\n    loadUser: (state, { payload: user }: PayloadAction<User>) => {\n      state.user = Some(user);\n      state.loading = false;\n    },\n    logout: (state) => {\n      state.user = None;\n    },\n    endLoad: (state) => {\n      state.loading = false;\n    },\n  },\n});\n\nexport const { loadUser, logout, endLoad, initializeApp } = slice.actions;\n\nexport default slice.reducer;\n","import { None, Option, Some } from '@hqoss/monads';\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport interface HomeState {\n  tags: Option<string[]>;\n  selectedTab: string;\n}\n\nconst initialState: HomeState = {\n  tags: None,\n  selectedTab: 'Global Feed',\n};\n\nconst slice = createSlice({\n  name: 'home',\n  initialState,\n  reducers: {\n    startLoadingTags: () => initialState,\n    loadTags: (state, { payload: tags }: PayloadAction<string[]>) => {\n      state.tags = Some(tags);\n    },\n    changeTab: (state, { payload: tab }: PayloadAction<string>) => {\n      state.selectedTab = tab;\n    },\n  },\n});\n\nexport const { startLoadingTags, loadTags, changeTab } = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { GenericErrors } from '../../../types/error';\n\nexport interface LoginState {\n  user: {\n    email: string;\n    password: string;\n  };\n  errors: GenericErrors;\n  loginIn: boolean;\n}\n\nconst initialState: LoginState = {\n  user: {\n    email: '',\n    password: '',\n  },\n  errors: {},\n  loginIn: false,\n};\n\nconst slice = createSlice({\n  name: 'login',\n  initialState,\n  reducers: {\n    initializeLogin: () => initialState,\n    updateField: (\n      state,\n      { payload: { name, value } }: PayloadAction<{ name: keyof LoginState['user']; value: string }>\n    ) => {\n      state.user[name] = value;\n    },\n    updateErrors: (state, { payload: errors }: PayloadAction<GenericErrors>) => {\n      state.errors = errors;\n      state.loginIn = false;\n    },\n    startLoginIn: (state) => {\n      state.loginIn = true;\n    },\n  },\n});\n\nexport const { initializeLogin, updateField, updateErrors, startLoginIn } = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { User, UserSettings } from '../../../types/user';\nimport { loadUser, logout } from '../../App/App.slice';\nimport * as R from 'ramda';\nimport { GenericErrors } from '../../../types/error';\n\nexport interface SettingsState {\n  user: UserSettings;\n  errors: GenericErrors;\n  updating: boolean;\n}\n\nconst initialState: SettingsState = {\n  user: { username: '', email: '', password: null, bio: null, image: null },\n  errors: {},\n  updating: false,\n};\n\nconst slice = createSlice({\n  name: 'settings',\n  initialState,\n  reducers: {\n    initializeSettings: () => initialState,\n    updateField: (state, { payload: { name, value } }: PayloadAction<{ name: keyof UserSettings; value: string }>) => {\n      state.user[name] = value;\n    },\n    updateErrors: (state, { payload: errors }: PayloadAction<GenericErrors>) => {\n      state.errors = errors;\n      state.updating = false;\n    },\n    startUpdate: (state) => {\n      state.updating = true;\n    },\n  },\n  extraReducers: {\n    [loadUser.type]: (state, { payload: user }: PayloadAction<User>) => {\n      state.user = { ...R.dissoc('token')(user), password: null };\n      state.updating = false;\n    },\n    [logout.type]: () => initialState,\n  },\n});\n\nexport const { initializeSettings, updateField, updateErrors, startUpdate } = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { GenericErrors } from '../../../types/error';\nimport { UserForRegistration } from '../../../types/user';\n\nexport interface RegisterState {\n  user: UserForRegistration;\n  errors: GenericErrors;\n  signingUp: boolean;\n}\n\nconst initialState: RegisterState = {\n  user: {\n    username: '',\n    email: '',\n    password: '',\n  },\n  errors: {},\n  signingUp: false,\n};\n\nconst slice = createSlice({\n  name: 'register',\n  initialState,\n  reducers: {\n    initializeRegister: () => initialState,\n    updateField: (\n      state,\n      { payload: { name, value } }: PayloadAction<{ name: keyof RegisterState['user']; value: string }>\n    ) => {\n      state.user[name] = value;\n    },\n    updateErrors: (state, { payload: errors }: PayloadAction<GenericErrors>) => {\n      state.errors = errors;\n      state.signingUp = false;\n    },\n    startSigningUp: (state) => {\n      state.signingUp = true;\n    },\n  },\n});\n\nexport const { initializeRegister, updateField, updateErrors, startSigningUp } = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { ArticleForEditor } from '../../types/article';\nimport * as R from 'ramda';\nimport { GenericErrors } from '../../types/error';\n\nexport interface EditorState {\n  article: ArticleForEditor;\n  tag: string;\n  submitting: boolean;\n  errors: GenericErrors;\n  loading: boolean;\n}\n\nconst initialState: EditorState = {\n  article: { title: '', body: '', tagList: [], description: '' },\n  tag: '',\n  submitting: false,\n  errors: {},\n  loading: true,\n};\n\nconst slice = createSlice({\n  name: 'editor',\n  initialState,\n  reducers: {\n    initializeEditor: () => initialState,\n    updateField: (\n      state,\n      { payload: { name, value } }: PayloadAction<{ name: keyof EditorState['article'] | 'tag'; value: string }>\n    ) => {\n      if (name === 'tag') {\n        state.tag = value;\n        return;\n      }\n\n      if (name !== 'tagList') {\n        state.article[name] = value;\n      }\n    },\n    updateErrors: (state, { payload: errors }: PayloadAction<GenericErrors>) => {\n      state.errors = errors;\n      state.submitting = false;\n    },\n    startSubmitting: (state) => {\n      state.submitting = true;\n    },\n    addTag: (state) => {\n      if (state.tag.length > 0) {\n        state.article.tagList.push(state.tag);\n        state.tag = '';\n      }\n    },\n    removeTag: (state, { payload: index }: PayloadAction<number>) => {\n      state.article.tagList = R.remove(index, 1, state.article.tagList);\n    },\n    loadArticle: (state, { payload: article }: PayloadAction<ArticleForEditor>) => {\n      state.article = article;\n      state.loading = false;\n    },\n  },\n});\n\nexport const { initializeEditor, updateField, startSubmitting, addTag, removeTag, updateErrors, loadArticle } =\n  slice.actions;\n\nexport default slice.reducer;\n","import { None, Option, Some } from '@hqoss/monads';\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { Article, MultipleArticles } from '../../types/article';\nimport * as R from 'ramda';\n\nexport interface ArticleViewerArticle {\n  article: Article;\n  isSubmitting: boolean;\n}\n\nexport interface ArticleViewerState {\n  articles: Option<readonly ArticleViewerArticle[]>;\n  currentPage: number;\n  articlesCount: number;\n}\n\nconst initialState: ArticleViewerState = {\n  articles: None,\n  currentPage: 1,\n  articlesCount: 0,\n};\n\nconst slice = createSlice({\n  name: 'articleViewer',\n  initialState,\n  reducers: {\n    startLoadingArticles: () => initialState,\n    loadArticles: (state, { payload: { articles, articlesCount } }: PayloadAction<MultipleArticles>) => {\n      state.articles = Some(articles.map((article) => ({ article, isSubmitting: false })));\n      state.articlesCount = articlesCount;\n    },\n    startSubmittingFavorite: (state, { payload: index }: PayloadAction<number>) => {\n      state.articles = state.articles.map(R.adjust(index, R.assoc('isSubmitting', true)));\n    },\n    endSubmittingFavorite: (\n      state,\n      { payload: { article, index } }: PayloadAction<{ index: number; article: Article }>\n    ) => {\n      state.articles = state.articles.map(R.update<ArticleViewerArticle>(index, { article, isSubmitting: false }));\n    },\n    changePage: (state, { payload: page }: PayloadAction<number>) => {\n      state.currentPage = page;\n      state.articles = None;\n    },\n  },\n});\n\nexport const { startLoadingArticles, loadArticles, startSubmittingFavorite, endSubmittingFavorite, changePage } =\n  slice.actions;\n\nexport default slice.reducer;\n","import { None, Option, Some } from '@hqoss/monads';\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { Profile } from '../../../types/profile';\n\nexport interface ProfilePageState {\n  profile: Option<Profile>;\n  submitting: boolean;\n}\n\nconst initialState: ProfilePageState = {\n  profile: None,\n  submitting: false,\n};\n\nconst slice = createSlice({\n  name: 'profile',\n  initialState,\n  reducers: {\n    initializeProfile: () => initialState,\n    loadProfile: (state, { payload: profile }: PayloadAction<Profile>) => {\n      state.profile = Some(profile);\n      state.submitting = false;\n    },\n    startSubmitting: (state) => ({ ...state, submitting: true }),\n  },\n});\n\nexport const { initializeProfile, loadProfile, startSubmitting } = slice.actions;\n\nexport default slice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { None, Option, Some } from '@hqoss/monads';\nimport { Article } from '../../../types/article';\nimport { Comment } from '../../../types/comment';\nimport { Profile } from '../../../types/profile';\n\nexport interface CommentSectionState {\n  comments: Option<Comment[]>;\n  commentBody: string;\n  submittingComment: boolean;\n}\n\nexport interface MetaSectionState {\n  submittingFavorite: boolean;\n  submittingFollow: boolean;\n  deletingArticle: boolean;\n}\n\nexport interface ArticlePageState {\n  article: Option<Article>;\n  commentSection: CommentSectionState;\n  metaSection: MetaSectionState;\n}\n\nconst initialState: ArticlePageState = {\n  article: None,\n  commentSection: {\n    comments: None,\n    commentBody: '',\n    submittingComment: false,\n  },\n  metaSection: {\n    submittingFavorite: false,\n    submittingFollow: false,\n    deletingArticle: false,\n  },\n};\n\nconst slice = createSlice({\n  name: 'settings',\n  initialState,\n  reducers: {\n    initializeArticlePage: () => initialState,\n    loadArticle: (state, { payload: article }: PayloadAction<Article>) => {\n      state.article = Some(article);\n      state.metaSection.submittingFavorite = false;\n    },\n    loadComments: (state, { payload: comments }: PayloadAction<Comment[]>) => {\n      state.commentSection.comments = Some(comments);\n      state.commentSection.commentBody = '';\n      state.commentSection.submittingComment = false;\n    },\n    updateAuthor: (state, { payload: author }: PayloadAction<Profile>) => {\n      state.article = state.article.map((article) => ({ ...article, author }));\n      state.metaSection.submittingFollow = false;\n    },\n    startSubmittingFavorite: (state) => {\n      state.metaSection.submittingFavorite = true;\n    },\n    startSubmittingFollow: (state) => {\n      state.metaSection.submittingFollow = true;\n    },\n    updateCommentBody: (state, { payload: commentBody }: PayloadAction<string>) => {\n      state.commentSection.commentBody = commentBody;\n    },\n    startSubmittingComment: (state) => {\n      state.commentSection.submittingComment = true;\n    },\n    startDeletingArticle: (state) => {\n      state.metaSection.deletingArticle = true;\n    },\n  },\n});\n\nexport const {\n  initializeArticlePage,\n  loadArticle,\n  loadComments,\n  updateAuthor,\n  startSubmittingFavorite,\n  startSubmittingFollow,\n  updateCommentBody,\n  startSubmittingComment,\n  startDeletingArticle,\n} = slice.actions;\n\nexport default slice.reducer;\n","import { Action, configureStore } from '@reduxjs/toolkit';\nimport app from '../components/App/App.slice';\nimport home from '../components/Pages/Home/Home.slice';\nimport login from '../components/Pages/Login/Login.slice';\nimport settings from '../components/Pages/Settings/Settings.slice';\nimport register from '../components/Pages/Register/Register.slice';\nimport editor from '../components/ArticleEditor/ArticleEditor.slice';\nimport articleViewer from '../components/ArticlesViewer/ArticlesViewer.slice';\nimport profile from '../components/Pages/ProfilePage/ProfilePage.slice';\nimport articlePage from '../components/Pages/ArticlePage/ArticlePage.slice';\n\nconst middlewareConfiguration = { serializableCheck: false };\n\nexport const store = configureStore({\n  reducer: { app, home, login, settings, register, editor, articleViewer, profile, articlePage },\n  devTools: {\n    name: 'Conduit',\n  },\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware(middlewareConfiguration),\n});\nexport type State = ReturnType<typeof store.getState>;\n\nexport function dispatchOnCall(action: Action) {\n  return () => store.dispatch(action);\n}\n","import axios from 'axios';\nimport { Decoder, nullable, object, string } from 'decoders';\nimport { loadUser } from '../components/App/App.slice';\nimport { store } from '../state/store';\n\nexport interface PublicUser {\n  username: string;\n  bio: string | null;\n  image: string | null;\n}\n\nexport interface User extends PublicUser {\n  email: string;\n  token: string;\n}\n\nexport const userDecoder: Decoder<User> = object({\n  email: string,\n  token: string,\n  username: string,\n  bio: nullable(string),\n  image: nullable(string),\n});\n\nexport interface UserSettings extends PublicUser {\n  email: string;\n  password: string | null;\n}\n\nexport interface UserForRegistration {\n  username: string;\n  email: string;\n  password: string;\n}\n\nexport function loadUserIntoApp(user: User) {\n  localStorage.setItem('token', user.token);\n  axios.defaults.headers.Authorization = `Token ${user.token}`;\n  store.dispatch(loadUser(user));\n}\n","import { Err, Ok, Result } from '@hqoss/monads';\nimport axios from 'axios';\nimport { array, guard, object, string } from 'decoders';\nimport settings from '../config/settings';\nimport {\n  Article,\n  articleDecoder,\n  ArticleForEditor,\n  ArticlesFilters,\n  FeedFilters,\n  MultipleArticles,\n  multipleArticlesDecoder,\n} from '../types/article';\nimport { Comment, commentDecoder } from '../types/comment';\nimport { GenericErrors, genericErrorsDecoder } from '../types/error';\nimport { objectToQueryString } from '../types/object';\nimport { Profile, profileDecoder } from '../types/profile';\nimport { User, userDecoder, UserForRegistration, UserSettings } from '../types/user';\n\naxios.defaults.baseURL = settings.baseApiUrl;\n\nexport async function getArticles(filters: ArticlesFilters = {}): Promise<MultipleArticles> {\n  const finalFilters: ArticlesFilters = {\n    limit: 10,\n    offset: 0,\n    ...filters,\n  };\n  return guard(multipleArticlesDecoder)((await axios.get(`articles?${objectToQueryString(finalFilters)}`)).data);\n}\n\nexport async function getTags(): Promise<{ tags: string[] }> {\n  return guard(object({ tags: array(string) }))((await axios.get('tags')).data);\n}\n\nexport async function login(email: string, password: string): Promise<Result<User, GenericErrors>> {\n  try {\n    const { data } = await axios.post('users/login', { user: { email, password } });\n\n    return Ok(guard(object({ user: userDecoder }))(data).user);\n  } catch ({ response: { data } }) {\n    return Err(guard(object({ errors: genericErrorsDecoder }))(data).errors);\n  }\n}\n\nexport async function getUser(): Promise<User> {\n  const { data } = await axios.get('user');\n  return guard(object({ user: userDecoder }))(data).user;\n}\n\nexport async function favoriteArticle(slug: string): Promise<Article> {\n  return guard(object({ article: articleDecoder }))((await axios.post(`articles/${slug}/favorite`)).data).article;\n}\n\nexport async function unfavoriteArticle(slug: string): Promise<Article> {\n  return guard(object({ article: articleDecoder }))((await axios.delete(`articles/${slug}/favorite`)).data).article;\n}\n\nexport async function updateSettings(user: UserSettings): Promise<Result<User, GenericErrors>> {\n  try {\n    const { data } = await axios.put('user', user);\n\n    return Ok(guard(object({ user: userDecoder }))(data).user);\n  } catch ({ data }) {\n    return Err(guard(object({ errors: genericErrorsDecoder }))(data).errors);\n  }\n}\n\nexport async function signUp(user: UserForRegistration): Promise<Result<User, GenericErrors>> {\n  try {\n    const { data } = await axios.post('users', { user });\n\n    return Ok(guard(object({ user: userDecoder }))(data).user);\n  } catch ({ response: { data } }) {\n    return Err(guard(object({ errors: genericErrorsDecoder }))(data).errors);\n  }\n}\n\nexport async function createArticle(article: ArticleForEditor): Promise<Result<Article, GenericErrors>> {\n  try {\n    const { data } = await axios.post('articles', { article });\n\n    return Ok(guard(object({ article: articleDecoder }))(data).article);\n  } catch ({ response: { data } }) {\n    return Err(guard(object({ errors: genericErrorsDecoder }))(data).errors);\n  }\n}\n\nexport async function getArticle(slug: string): Promise<Article> {\n  const { data } = await axios.get(`articles/${slug}`);\n  return guard(object({ article: articleDecoder }))(data).article;\n}\n\nexport async function updateArticle(slug: string, article: ArticleForEditor): Promise<Result<Article, GenericErrors>> {\n  try {\n    const { data } = await axios.put(`articles/${slug}`, { article });\n\n    return Ok(guard(object({ article: articleDecoder }))(data).article);\n  } catch ({ response: { data } }) {\n    return Err(guard(object({ errors: genericErrorsDecoder }))(data).errors);\n  }\n}\n\nexport async function getProfile(username: string): Promise<Profile> {\n  const { data } = await axios.get(`profiles/${username}`);\n  return guard(object({ profile: profileDecoder }))(data).profile;\n}\n\nexport async function followUser(username: string): Promise<Profile> {\n  const { data } = await axios.post(`profiles/${username}/follow`);\n  return guard(object({ profile: profileDecoder }))(data).profile;\n}\n\nexport async function unfollowUser(username: string): Promise<Profile> {\n  const { data } = await axios.delete(`profiles/${username}/follow`);\n  return guard(object({ profile: profileDecoder }))(data).profile;\n}\n\nexport async function getFeed(filters: FeedFilters = {}): Promise<MultipleArticles> {\n  const finalFilters: ArticlesFilters = {\n    limit: 10,\n    offset: 0,\n    ...filters,\n  };\n  return guard(multipleArticlesDecoder)((await axios.get(`articles/feed?${objectToQueryString(finalFilters)}`)).data);\n}\n\nexport async function getArticleComments(slug: string): Promise<Comment[]> {\n  const { data } = await axios.get(`articles/${slug}/comments`);\n  return guard(object({ comments: array(commentDecoder) }))(data).comments;\n}\n\nexport async function deleteComment(slug: string, commentId: number): Promise<void> {\n  await axios.delete(`articles/${slug}/comments/${commentId}`);\n}\n\nexport async function createComment(slug: string, body: string): Promise<Comment> {\n  const { data } = await axios.post(`articles/${slug}/comments`, { comment: { body } });\n  return guard(object({ comment: commentDecoder }))(data).comment;\n}\n\nexport async function deleteArticle(slug: string): Promise<void> {\n  await axios.delete(`articles/${slug}`);\n}\n","import { useEffect, useState } from 'react';\nimport { State, store } from './store';\n\nexport function useStoreWithInitializer<T>(getter: (state: State) => T, initializer: () => unknown) {\n  const [state, setState] = useState(getter(store.getState()));\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => setState(getter(store.getState())));\n    initializer();\n    return unsubscribe;\n  }, [null]);\n  return state;\n}\n\nexport function useStore<T>(getter: (state: State) => T) {\n  return useStoreWithInitializer(getter, () => {});\n}\n","export interface GenericFormField {\n  name: string;\n  type: string;\n  placeholder: string;\n  rows?: number;\n  fieldType: 'input' | 'textarea' | 'list';\n  listName?: string;\n  lg: boolean;\n}\n\nexport function buildGenericFormField(data: Partial<GenericFormField> & { name: string }): GenericFormField {\n  return {\n    type: 'text',\n    placeholder: '',\n    fieldType: 'input',\n    lg: true,\n    ...data,\n  };\n}\n","export default {\n  baseApiUrl: 'https://api.realworld.io/api/',\n};\n","export function ContainerPage({ children }: { children: JSX.Element | JSX.Element[] }) {\n  return (\n    <div className='container page'>\n      <div className='row'> {children} </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport function FormGroup({\n  type,\n  placeholder,\n  disabled,\n  value,\n  onChange,\n  lg,\n}: {\n  type: string;\n  placeholder: string;\n  disabled: boolean;\n  value: string;\n  lg: boolean;\n  onChange: (ev: React.ChangeEvent<HTMLInputElement>) => void;\n}) {\n  return (\n    <fieldset className='form-group'>\n      <input\n        className={`form-control${!lg ? '' : ' form-control-lg'}`}\n        {...{ type, placeholder, disabled, value, onChange }}\n      />\n    </fieldset>\n  );\n}\n\nexport function TextAreaFormGroup({\n  type,\n  placeholder,\n  disabled,\n  value,\n  rows,\n  onChange,\n  lg,\n}: {\n  type: string;\n  placeholder: string;\n  disabled: boolean;\n  rows: number;\n  value: string;\n  lg: boolean;\n  onChange: (ev: React.ChangeEvent<HTMLTextAreaElement>) => void;\n}) {\n  return (\n    <fieldset className='form-group'>\n      <textarea\n        className={`form-control${!lg ? '' : ' form-control-lg'}`}\n        {...{ type, placeholder, disabled, value, onChange, rows }}\n      ></textarea>\n    </fieldset>\n  );\n}\n\nexport function ListFormGroup({\n  type,\n  placeholder,\n  disabled,\n  value,\n  listValue,\n  lg,\n  onChange,\n  onEnter,\n  onRemoveItem,\n}: {\n  type: string;\n  placeholder: string;\n  disabled: boolean;\n  value: string;\n  listValue: string[];\n  lg: boolean;\n  onChange: (ev: React.ChangeEvent<HTMLInputElement>) => void;\n  onEnter: () => void;\n  onRemoveItem: (index: number) => void;\n}) {\n  return (\n    <fieldset className='form-group'>\n      <input\n        className={`form-control${!lg ? '' : ' form-control-lg'}`}\n        {...{ type, placeholder, disabled, value, onChange }}\n        onKeyDown={(ev) => ev.key === 'Enter' && ev.preventDefault()}\n        onKeyUp={onListFieldKeyUp(onEnter)}\n      />\n      <div className='tag-list'>\n        {listValue.map((value, index) => (\n          <span key={value} className='tag-default tag-pill' onClick={() => onRemoveItem(index)}>\n            <i className='ion-close-round'></i>\n            {value}\n          </span>\n        ))}\n      </div>\n    </fieldset>\n  );\n}\n\nexport function onListFieldKeyUp(onEnter: () => void): (ev: React.KeyboardEvent) => void {\n  return (ev) => {\n    if (ev.key === 'Enter') {\n      ev.preventDefault();\n      onEnter();\n    }\n  };\n}\n","import { GenericErrors } from '../../types/error';\n\nexport function Errors({ errors }: { errors: GenericErrors }) {\n  return (\n    <ul className='error-messages'>\n      {Object.entries(errors).map(([field, fieldErrors]) =>\n        fieldErrors.map((fieldError) => (\n          <li key={field + fieldError}>\n            {field} {fieldError}\n          </li>\n        ))\n      )}\n    </ul>\n  );\n}\n","import { FC, Fragment } from 'react';\nimport { FormGroup, ListFormGroup, TextAreaFormGroup } from '../FormGroup/FormGroup';\nimport { GenericFormField } from '../../types/genericFormField';\nimport { GenericErrors } from '../../types/error';\nimport { Errors } from '../Errors/Errors';\n\nexport interface GenericFormProps {\n  fields: GenericFormField[];\n  disabled: boolean;\n  formObject: Record<string, string | null>;\n  submitButtonText: string;\n  errors: GenericErrors;\n  onChange: (name: string, value: string) => void;\n  onSubmit: (ev: React.FormEvent) => void;\n  onAddItemToList?: (name: string) => void;\n  onRemoveListItem?: (name: string, index: number) => void;\n}\n\nexport const GenericForm: FC<GenericFormProps> = ({\n  fields,\n  disabled,\n  formObject,\n  submitButtonText,\n  errors,\n  onChange,\n  onSubmit,\n  onAddItemToList,\n  onRemoveListItem,\n}) => (\n  <Fragment>\n    <Errors errors={errors} />\n\n    <form onSubmit={onSubmit}>\n      <fieldset>\n        {fields.map((field) =>\n          field.fieldType === 'input' ? (\n            <FormGroup\n              key={field.name}\n              disabled={disabled}\n              type={field.type}\n              placeholder={field.placeholder}\n              value={formObject[field.name] || ''}\n              onChange={onUpdateField(field.name, onChange)}\n              lg={field.lg}\n            />\n          ) : field.fieldType === 'textarea' ? (\n            <TextAreaFormGroup\n              key={field.name}\n              disabled={disabled}\n              type={field.type}\n              placeholder={field.placeholder}\n              value={formObject[field.name] || ''}\n              rows={field.rows as number}\n              onChange={onUpdateField(field.name, onChange)}\n              lg={field.lg}\n            />\n          ) : (\n            <ListFormGroup\n              key={field.name}\n              disabled={disabled}\n              type={field.type}\n              placeholder={field.placeholder}\n              value={formObject[field.name] || ''}\n              onChange={onUpdateField(field.name, onChange)}\n              listValue={formObject[field.listName as string] as unknown as string[]}\n              onEnter={() => onAddItemToList && field.listName && onAddItemToList(field.listName)}\n              onRemoveItem={(index) => onRemoveListItem && field.listName && onRemoveListItem(field.listName, index)}\n              lg={field.lg}\n            />\n          )\n        )}\n        <button className='btn btn-lg btn-primary pull-xs-right'>{submitButtonText}</button>\n      </fieldset>\n    </form>\n  </Fragment>\n);\n\nfunction onUpdateField(\n  name: string,\n  onChange: GenericFormProps['onChange']\n): (ev: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void {\n  return ({ target: { value } }) => {\n    onChange(name, value);\n  };\n}\n","import React from 'react';\nimport { store } from '../../state/store';\nimport { useStore } from '../../state/storeHooks';\nimport { buildGenericFormField } from '../../types/genericFormField';\nimport { ContainerPage } from '../ContainerPage/ContainerPage';\nimport { GenericForm } from '../GenericForm/GenericForm';\nimport { addTag, EditorState, removeTag, updateField } from './ArticleEditor.slice';\n\nexport function ArticleEditor({ onSubmit }: { onSubmit: (ev: React.FormEvent) => void }) {\n  const { article, submitting, tag, errors } = useStore(({ editor }) => editor);\n\n  return (\n    <div className='editor-page'>\n      <ContainerPage>\n        <div className='col-md-10 offset-md-1 col-xs-12'>\n          <GenericForm\n            formObject={{ ...article, tag } as unknown as Record<string, string | null>}\n            disabled={submitting}\n            errors={errors}\n            onChange={onUpdateField}\n            onSubmit={onSubmit}\n            submitButtonText='Publish Article'\n            onAddItemToList={onAddTag}\n            onRemoveListItem={onRemoveTag}\n            fields={[\n              buildGenericFormField({ name: 'title', placeholder: 'Article Title' }),\n              buildGenericFormField({ name: 'description', placeholder: \"What's this article about?\", lg: false }),\n              buildGenericFormField({\n                name: 'body',\n                placeholder: 'Write your article (in markdown)',\n                fieldType: 'textarea',\n                rows: 8,\n                lg: false,\n              }),\n              buildGenericFormField({\n                name: 'tag',\n                placeholder: 'Enter Tags',\n                listName: 'tagList',\n                fieldType: 'list',\n                lg: false,\n              }),\n            ]}\n          />\n        </div>\n      </ContainerPage>\n    </div>\n  );\n}\n\nfunction onUpdateField(name: string, value: string) {\n  store.dispatch(updateField({ name: name as keyof EditorState['article'], value }));\n}\n\nfunction onAddTag() {\n  store.dispatch(addTag());\n}\n\nfunction onRemoveTag(_: string, index: number) {\n  store.dispatch(removeTag(index));\n}\n","import React, { Fragment, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getArticle, updateArticle } from '../../../services/conduit';\nimport { store } from '../../../state/store';\nimport { useStore } from '../../../state/storeHooks';\nimport { ArticleEditor } from '../../ArticleEditor/ArticleEditor';\nimport { initializeEditor, loadArticle, startSubmitting, updateErrors } from '../../ArticleEditor/ArticleEditor.slice';\n\nexport function EditArticle() {\n  const { slug } = useParams<{ slug: string }>();\n  const { loading } = useStore(({ editor }) => editor);\n\n  useEffect(() => {\n    _loadArticle(slug);\n  }, [slug]);\n\n  return <Fragment>{!loading && <ArticleEditor onSubmit={onSubmit(slug)} />}</Fragment>;\n}\n\nasync function _loadArticle(slug: string) {\n  store.dispatch(initializeEditor());\n  try {\n    const { title, description, body, tagList, author } = await getArticle(slug);\n\n    if (author.username !== store.getState().app.user.unwrap().username) {\n      location.hash = '#/';\n      return;\n    }\n\n    store.dispatch(loadArticle({ title, description, body, tagList }));\n  } catch {\n    location.hash = '#/';\n  }\n}\n\nfunction onSubmit(slug: string): (ev: React.FormEvent) => void {\n  return async (ev) => {\n    ev.preventDefault();\n\n    store.dispatch(startSubmitting());\n    const result = await updateArticle(slug, store.getState().editor.article);\n\n    result.match({\n      err: (errors) => store.dispatch(updateErrors(errors)),\n      ok: ({ slug }) => {\n        location.hash = `#/article/${slug}`;\n      },\n    });\n  };\n}\n","export function Footer() {\n  return (\n    <footer>\n      <div className='container'>\n        <a href='/#/' className='logo-font'>\n          conduit\n        </a>\n        <span className='attribution'>\n          An interactive learning project from <a href='https://thinkster.io'>Thinkster</a>. Code &amp; design licensed\n          under MIT.\n        </span>\n      </div>\n    </footer>\n  );\n}\n","import { Fragment } from 'react';\nimport { HashRouter, NavLink } from 'react-router-dom';\nimport { useStore } from '../../state/storeHooks';\nimport { User } from '../../types/user';\n\nexport function Header() {\n  const { user } = useStore(({ app }) => app);\n\n  return (\n    <nav className='navbar navbar-light'>\n      <div className='container'>\n        <a className='navbar-brand' href='/#/'>\n          conduit\n        </a>\n        <ul className='nav navbar-nav pull-xs-right'>\n          <HashRouter>\n            <NavItem text='Home' href='/' />\n\n            {user.match({\n              none: () => <GuestLinks />,\n              some: (user) => <UserLinks user={user} />,\n            })}\n          </HashRouter>\n        </ul>\n      </div>\n    </nav>\n  );\n}\n\nfunction NavItem({ text, href, icon }: { text: string; href: string; icon?: string }) {\n  return (\n    <li className='nav-item'>\n      <NavLink exact to={href} activeClassName='active' className='nav-link'>\n        {icon && <i className={icon}></i>}&nbsp;\n        {text}\n      </NavLink>\n    </li>\n  );\n}\n\nfunction GuestLinks() {\n  return (\n    <Fragment>\n      <NavItem text='Sign in' href='/login' />\n      <NavItem text='Sign up' href='/register' />\n    </Fragment>\n  );\n}\n\nfunction UserLinks({ user: { username } }: { user: User }) {\n  return (\n    <Fragment>\n      <NavItem text='New Article' href='/editor' icon='ion-compose' />\n      <NavItem text='Settings' href='/settings' icon='ion-gear-a' />\n      <NavItem text={`${username}`} href={`/profile/${username}`} />\n    </Fragment>\n  );\n}\n","export function classObjectToClassName(obj: Record<string, boolean>): string {\n  return Object.entries(obj)\n    .filter(([, active]) => active)\n    .map(([name]) => name)\n    .join(' ');\n}\n","import { format } from 'date-fns';\nimport { Link } from 'react-router-dom';\nimport { Article } from '../../types/article';\n\nexport function ArticlePreview({\n  article: {\n    createdAt,\n    favorited,\n    favoritesCount,\n    slug,\n    title,\n    description,\n    tagList,\n    author: { image, username },\n  },\n  isSubmitting,\n  onFavoriteToggle,\n}: {\n  article: Article;\n  isSubmitting: boolean;\n  onFavoriteToggle?: () => void;\n}) {\n  return (\n    <div className='article-preview'>\n      <div className='article-meta'>\n        <Link to={`/profile/${username}`} className='author'>\n          <img src={image || undefined} />\n        </Link>\n        <div className='info'>\n          <Link to={`/profile/${username}`} className='author'>\n            {username}\n          </Link>\n          <span className='date'>{format(createdAt, 'PP')}</span>\n        </div>\n        <button\n          className={`btn btn-sm pull-xs-right ${favorited ? 'btn-primary' : 'btn-outline-primary'}`}\n          aria-label='Toggle Favorite'\n          disabled={isSubmitting}\n          onClick={onFavoriteToggle}\n        >\n          <i className='ion-heart'></i> {favoritesCount}\n        </button>\n      </div>\n      <a href={`/#/article/${slug}`} className='preview-link'>\n        <h1>{title}</h1>\n        <p>{description}</p>\n        <span>Read more...</span>\n        <TagList tagList={tagList} />\n      </a>\n    </div>\n  );\n}\n\nexport function TagList({ tagList }: { tagList: string[] }) {\n  return (\n    <ul className='tag-list'>\n      {tagList.map((tag) => (\n        <li key={tag} className='tag-default tag-pill tag-outline'>\n          {tag}\n        </li>\n      ))}\n    </ul>\n  );\n}\n","import { range } from 'ramda';\n\nexport function Pagination({\n  currentPage,\n  count,\n  itemsPerPage,\n  onPageChange,\n}: {\n  currentPage: number;\n  count: number;\n  itemsPerPage: number;\n  onPageChange?: (index: number) => void;\n}) {\n  return (\n    <nav>\n      <ul className='pagination'>\n        {Math.ceil(count / itemsPerPage) > 1 &&\n          range(1, Math.ceil(count / itemsPerPage) + 1).map((index) => (\n            <li\n              key={index}\n              className={`page-item${currentPage !== index ? '' : ' active'}`}\n              onClick={onPageChange && (() => onPageChange(index))}\n            >\n              <a className='page-link' aria-label={`Go to page number ${index}`} href='#'>\n                {index}\n              </a>\n            </li>\n          ))}\n      </ul>\n    </nav>\n  );\n}\n","import { Fragment } from 'react';\nimport { favoriteArticle, unfavoriteArticle } from '../../services/conduit';\nimport { store } from '../../state/store';\nimport { useStore } from '../../state/storeHooks';\nimport { Article } from '../../types/article';\nimport { classObjectToClassName } from '../../types/style';\nimport { ArticlePreview } from '../ArticlePreview/ArticlePreview';\nimport { Pagination } from '../Pagination/Pagination';\nimport { ArticleViewerState, endSubmittingFavorite, startSubmittingFavorite } from './ArticlesViewer.slice';\n\nexport function ArticlesViewer({\n  toggleClassName,\n  tabs,\n  selectedTab,\n  onPageChange,\n  onTabChange,\n}: {\n  toggleClassName: string;\n  tabs: string[];\n  selectedTab: string;\n  onPageChange?: (index: number) => void;\n  onTabChange?: (tab: string) => void;\n}) {\n  const { articles, articlesCount, currentPage } = useStore(({ articleViewer }) => articleViewer);\n\n  return (\n    <Fragment>\n      <ArticlesTabSet {...{ tabs, selectedTab, toggleClassName, onTabChange }} />\n      <ArticleList articles={articles} />\n      <Pagination currentPage={currentPage} count={articlesCount} itemsPerPage={10} onPageChange={onPageChange} />\n    </Fragment>\n  );\n}\n\nfunction ArticlesTabSet({\n  tabs,\n  toggleClassName,\n  selectedTab,\n  onTabChange,\n}: {\n  tabs: string[];\n  toggleClassName: string;\n  selectedTab: string;\n  onTabChange?: (tab: string) => void;\n}) {\n  return (\n    <div className={toggleClassName}>\n      <ul className='nav nav-pills outline-active'>\n        {tabs.map((tab) => (\n          <Tab key={tab} tab={tab} active={tab === selectedTab} onClick={() => onTabChange && onTabChange(tab)} />\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nfunction Tab({ tab, active, onClick }: { tab: string; active: boolean; onClick: () => void }) {\n  return (\n    <li className='nav-item'>\n      <a\n        className={classObjectToClassName({ 'nav-link': true, active })}\n        href='#'\n        onClick={(ev) => {\n          ev.preventDefault();\n          onClick();\n        }}\n      >\n        {tab}\n      </a>\n    </li>\n  );\n}\n\nfunction ArticleList({ articles }: { articles: ArticleViewerState['articles'] }) {\n  return articles.match({\n    none: () => (\n      <div className='article-preview' key={1}>\n        Loading articles...\n      </div>\n    ),\n    some: (articles) => (\n      <Fragment>\n        {articles.length === 0 && (\n          <div className='article-preview' key={1}>\n            No articles are here... yet.\n          </div>\n        )}\n        {articles.map(({ article, isSubmitting }, index) => (\n          <ArticlePreview\n            key={article.slug}\n            article={article}\n            isSubmitting={isSubmitting}\n            onFavoriteToggle={isSubmitting ? undefined : onFavoriteToggle(index, article)}\n          />\n        ))}\n      </Fragment>\n    ),\n  });\n}\n\nfunction onFavoriteToggle(index: number, { slug, favorited }: Article) {\n  return async () => {\n    if (store.getState().app.user.isNone()) {\n      location.hash = '#/login';\n      return;\n    }\n    store.dispatch(startSubmittingFavorite(index));\n\n    const article = await (favorited ? unfavoriteArticle(slug) : favoriteArticle(slug));\n    store.dispatch(endSubmittingFavorite({ index, article }));\n  };\n}\n","import { Option } from '@hqoss/monads';\nimport { getArticles, getFeed, getTags } from '../../../services/conduit';\nimport { store } from '../../../state/store';\nimport { useStoreWithInitializer } from '../../../state/storeHooks';\nimport { FeedFilters } from '../../../types/article';\nimport { ArticlesViewer } from '../../ArticlesViewer/ArticlesViewer';\nimport { changePage, loadArticles, startLoadingArticles } from '../../ArticlesViewer/ArticlesViewer.slice';\nimport { ContainerPage } from '../../ContainerPage/ContainerPage';\nimport { changeTab, loadTags, startLoadingTags } from './Home.slice';\n\nexport function Home() {\n  const { tags, selectedTab } = useStoreWithInitializer(({ home }) => home, load);\n\n  return (\n    <div className='home-page'>\n      {renderBanner()}\n      <ContainerPage>\n        <div className='col-md-9'>\n          <ArticlesViewer\n            toggleClassName='feed-toggle'\n            selectedTab={selectedTab}\n            tabs={buildTabsNames(selectedTab)}\n            onPageChange={onPageChange}\n            onTabChange={onTabChange}\n          />\n        </div>\n\n        <div className='col-md-3'>\n          <HomeSidebar tags={tags} />\n        </div>\n      </ContainerPage>\n    </div>\n  );\n}\n\nasync function load() {\n  store.dispatch(startLoadingArticles());\n  store.dispatch(startLoadingTags());\n\n  if (store.getState().app.user.isSome()) {\n    store.dispatch(changeTab('Your Feed'));\n  }\n\n  const multipleArticles = await getFeedOrGlobalArticles();\n  store.dispatch(loadArticles(multipleArticles));\n\n  const tagsResult = await getTags();\n  store.dispatch(loadTags(tagsResult.tags));\n}\n\nfunction renderBanner() {\n  return (\n    <div className='banner'>\n      <div className='container'>\n        <h1 className='logo-font'>conduit</h1>\n        <p>A place to share your knowledge.</p>\n      </div>\n    </div>\n  );\n}\n\nfunction buildTabsNames(selectedTab: string) {\n  const { user } = store.getState().app;\n\n  return Array.from(new Set([...(user.isSome() ? ['Your Feed'] : []), 'Global Feed', selectedTab]));\n}\n\nasync function onPageChange(index: number) {\n  store.dispatch(changePage(index));\n\n  const multipleArticles = await getFeedOrGlobalArticles({ offset: (index - 1) * 10 });\n  store.dispatch(loadArticles(multipleArticles));\n}\n\nasync function onTabChange(tab: string) {\n  store.dispatch(changeTab(tab));\n  store.dispatch(startLoadingArticles());\n\n  const multipleArticles = await getFeedOrGlobalArticles();\n  store.dispatch(loadArticles(multipleArticles));\n}\n\nasync function getFeedOrGlobalArticles(filters: FeedFilters = {}) {\n  const { selectedTab } = store.getState().home;\n  const finalFilters = {\n    ...filters,\n    tag: selectedTab.slice(2),\n  };\n\n  return await (selectedTab === 'Your Feed' ? getFeed : getArticles)(\n    !selectedTab.startsWith('#') ? filters : finalFilters\n  );\n}\n\nfunction HomeSidebar({ tags }: { tags: Option<string[]> }) {\n  return (\n    <div className='sidebar'>\n      <p>Popular Tags</p>\n\n      {tags.match({\n        none: () => <span>Loading tags...</span>,\n        some: (tags) => (\n          <div className='tag-list'>\n            {' '}\n            {tags.map((tag) => (\n              <a key={tag} href='#' className='tag-pill tag-default' onClick={() => onTabChange(`# ${tag}`)}>\n                {tag}\n              </a>\n            ))}{' '}\n          </div>\n        ),\n      })}\n    </div>\n  );\n}\n","import React from 'react';\nimport { login } from '../../../services/conduit';\nimport { dispatchOnCall, store } from '../../../state/store';\nimport { useStoreWithInitializer } from '../../../state/storeHooks';\nimport { loadUserIntoApp } from '../../../types/user';\nimport { buildGenericFormField } from '../../../types/genericFormField';\nimport { GenericForm } from '../../GenericForm/GenericForm';\nimport { initializeLogin, LoginState, startLoginIn, updateErrors, updateField } from './Login.slice';\nimport { ContainerPage } from '../../ContainerPage/ContainerPage';\n\nexport function Login() {\n  const { errors, loginIn, user } = useStoreWithInitializer(({ login }) => login, dispatchOnCall(initializeLogin()));\n\n  return (\n    <div className='auth-page'>\n      <ContainerPage>\n        <div className='col-md-6 offset-md-3 col-xs-12'>\n          <h1 className='text-xs-center'>Sign in</h1>\n          <p className='text-xs-center'>\n            <a href='/#/register'>Need an account?</a>\n          </p>\n\n          <GenericForm\n            disabled={loginIn}\n            formObject={user}\n            submitButtonText='Sign in'\n            errors={errors}\n            onChange={onUpdateField}\n            onSubmit={signIn}\n            fields={[\n              buildGenericFormField({ name: 'email', placeholder: 'Email' }),\n              buildGenericFormField({ name: 'password', placeholder: 'Password', type: 'password' }),\n            ]}\n          />\n        </div>\n      </ContainerPage>\n    </div>\n  );\n}\n\nfunction onUpdateField(name: string, value: string) {\n  store.dispatch(updateField({ name: name as keyof LoginState['user'], value }));\n}\n\nasync function signIn(ev: React.FormEvent) {\n  ev.preventDefault();\n\n  if (store.getState().login.loginIn) return;\n  store.dispatch(startLoginIn());\n\n  const { email, password } = store.getState().login.user;\n  const result = await login(email, password);\n\n  result.match({\n    ok: (user) => {\n      location.hash = '#/';\n      loadUserIntoApp(user);\n    },\n    err: (e) => {\n      store.dispatch(updateErrors(e));\n    },\n  });\n}\n","import { FormEvent, useEffect } from 'react';\nimport { createArticle } from '../../../services/conduit';\nimport { store } from '../../../state/store';\nimport { ArticleEditor } from '../../ArticleEditor/ArticleEditor';\nimport { initializeEditor, startSubmitting, updateErrors } from '../../ArticleEditor/ArticleEditor.slice';\n\nexport function NewArticle() {\n  useEffect(() => {\n    store.dispatch(initializeEditor());\n  }, [null]);\n\n  return <ArticleEditor onSubmit={onSubmit} />;\n}\n\nasync function onSubmit(ev: FormEvent) {\n  ev.preventDefault();\n  store.dispatch(startSubmitting());\n  const result = await createArticle(store.getState().editor.article);\n\n  result.match({\n    err: (errors) => store.dispatch(updateErrors(errors)),\n    ok: ({ slug }) => {\n      location.hash = `#/article/${slug}`;\n    },\n  });\n}\n","import { dispatchOnCall, store } from '../../../state/store';\nimport { useStoreWithInitializer } from '../../../state/storeHooks';\nimport { buildGenericFormField } from '../../../types/genericFormField';\nimport { GenericForm } from '../../GenericForm/GenericForm';\nimport { initializeRegister, RegisterState, startSigningUp, updateErrors, updateField } from './Register.slice';\nimport { loadUserIntoApp, UserForRegistration } from '../../../types/user';\nimport { signUp } from '../../../services/conduit';\nimport { ContainerPage } from '../../ContainerPage/ContainerPage';\n\nexport function Register() {\n  const { errors, signingUp, user } = useStoreWithInitializer(\n    ({ register }) => register,\n    dispatchOnCall(initializeRegister())\n  );\n\n  return (\n    <div className='auth-page'>\n      <ContainerPage>\n        <div className='col-md-6 offset-md-3 col-xs-12'>\n          <h1 className='text-xs-center'>Sign up</h1>\n          <p className='text-xs-center'>\n            <a href='/#/login'>Have an account?</a>\n          </p>\n\n          <GenericForm\n            disabled={signingUp}\n            formObject={user as unknown as Record<string, string>}\n            submitButtonText='Sign up'\n            errors={errors}\n            onChange={onUpdateField}\n            onSubmit={onSignUp(user)}\n            fields={[\n              buildGenericFormField({ name: 'username', placeholder: 'Username' }),\n              buildGenericFormField({ name: 'email', placeholder: 'Email' }),\n              buildGenericFormField({ name: 'password', placeholder: 'Password', type: 'password' }),\n            ]}\n          />\n        </div>\n      </ContainerPage>\n    </div>\n  );\n}\n\nfunction onUpdateField(name: string, value: string) {\n  store.dispatch(updateField({ name: name as keyof RegisterState['user'], value }));\n}\n\nfunction onSignUp(user: UserForRegistration) {\n  return async (ev: React.FormEvent) => {\n    ev.preventDefault();\n    store.dispatch(startSigningUp());\n    const result = await signUp(user);\n\n    result.match({\n      err: (e) => store.dispatch(updateErrors(e)),\n      ok: (user) => {\n        location.hash = '#/';\n        loadUserIntoApp(user);\n      },\n    });\n  };\n}\n","import axios from 'axios';\nimport React from 'react';\nimport { updateSettings } from '../../../services/conduit';\nimport { store } from '../../../state/store';\nimport { useStore } from '../../../state/storeHooks';\nimport { UserSettings } from '../../../types/user';\nimport { buildGenericFormField } from '../../../types/genericFormField';\nimport { loadUser, logout } from '../../App/App.slice';\nimport { GenericForm } from '../../GenericForm/GenericForm';\nimport { SettingsState, startUpdate, updateErrors, updateField } from './Settings.slice';\nimport { ContainerPage } from '../../ContainerPage/ContainerPage';\n\nexport interface SettingsField {\n  name: keyof UserSettings;\n  type?: string;\n  isTextArea?: true;\n  placeholder: string;\n}\n\nexport function Settings() {\n  const { user, errors, updating } = useStore(({ settings }) => settings);\n\n  return (\n    <div className='settings-page'>\n      <ContainerPage>\n        <div className='col-md-6 offset-md-3 col-xs-12'>\n          <h1 className='text-xs-center'>Your Settings</h1>\n\n          <GenericForm\n            disabled={updating}\n            formObject={{ ...user }}\n            submitButtonText='Update Settings'\n            errors={errors}\n            onChange={onUpdateField}\n            onSubmit={onUpdateSettings(user)}\n            fields={[\n              buildGenericFormField({ name: 'image', placeholder: 'URL of profile picture' }),\n              buildGenericFormField({ name: 'username', placeholder: 'Your Name' }),\n              buildGenericFormField({\n                name: 'bio',\n                placeholder: 'Short bio about you',\n                rows: 8,\n                fieldType: 'textarea',\n              }),\n              buildGenericFormField({ name: 'email', placeholder: 'Email' }),\n              buildGenericFormField({ name: 'password', placeholder: 'Password', type: 'password' }),\n            ]}\n          />\n\n          <hr />\n          <button className='btn btn-outline-danger' onClick={_logout}>\n            Or click here to logout.\n          </button>\n        </div>\n      </ContainerPage>\n    </div>\n  );\n}\n\nfunction onUpdateField(name: string, value: string) {\n  store.dispatch(updateField({ name: name as keyof SettingsState['user'], value }));\n}\n\nfunction onUpdateSettings(user: UserSettings) {\n  return async (ev: React.FormEvent) => {\n    ev.preventDefault();\n    store.dispatch(startUpdate());\n    const result = await updateSettings(user);\n\n    result.match({\n      err: (e) => store.dispatch(updateErrors(e)),\n      ok: (user) => {\n        store.dispatch(loadUser(user));\n        location.hash = '/';\n      },\n    });\n  };\n}\n\nfunction _logout() {\n  delete axios.defaults.headers.Authorization;\n  localStorage.removeItem('token');\n  store.dispatch(logout());\n  location.hash = '/';\n}\n","export function redirect(path: string) {\n  location.hash = `#/${path}`;\n}\n","import { useStore } from '../../state/storeHooks';\nimport { Profile } from '../../types/profile';\n\nexport function UserInfo({\n  user: { image, username, bio, following },\n  disabled,\n  onFollowToggle,\n  onEditSettings,\n}: {\n  user: Profile;\n  disabled: boolean;\n  onFollowToggle?: () => void;\n  onEditSettings?: () => void;\n}) {\n  const { user } = useStore(({ app }) => app);\n  const sessionUsername = user.map((x) => x.username).unwrapOr('');\n\n  return (\n    <div className='user-info'>\n      <div className='container'>\n        <div className='row'>\n          <div className='col-xs-12 col-md-10 offset-md-1'>\n            <img src={image || undefined} className='user-img' />\n            <h4>{username}</h4>\n            <p>{bio}</p>\n\n            {sessionUsername === username ? (\n              <EditProfileButton onClick={onEditSettings} disabled={disabled} />\n            ) : (\n              <ToggleFollowButton\n                following={following}\n                username={username}\n                disabled={disabled}\n                onClick={onFollowToggle}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction ToggleFollowButton({\n  following,\n  username,\n  disabled,\n  onClick,\n}: {\n  following: boolean;\n  username: string;\n  disabled: boolean;\n  onClick?: () => void;\n}) {\n  return (\n    <button className='btn btn-sm btn-outline-secondary action-btn' onClick={onClick} disabled={disabled}>\n      <i className='ion-plus-round'></i>\n      &nbsp;\n      {following ? ' Unfollow' : ' Follow'} {username}\n    </button>\n  );\n}\n\nfunction EditProfileButton({ disabled, onClick }: { disabled: boolean; onClick?: () => void }) {\n  return (\n    <button className='btn btn-sm btn-outline-secondary action-btn' onClick={onClick} disabled={disabled}>\n      <i className='ion-gear-a'></i>&nbsp; Edit Profile Settings\n    </button>\n  );\n}\n","import { useEffect } from 'react';\nimport { useLocation, useParams } from 'react-router-dom';\nimport { followUser, getArticles, getProfile, unfollowUser } from '../../../services/conduit';\nimport { store } from '../../../state/store';\nimport { useStore } from '../../../state/storeHooks';\nimport { redirect } from '../../../types/location';\nimport { Profile } from '../../../types/profile';\nimport { ArticlesViewer } from '../../ArticlesViewer/ArticlesViewer';\nimport { changePage, loadArticles, startLoadingArticles } from '../../ArticlesViewer/ArticlesViewer.slice';\nimport { UserInfo } from '../../UserInfo/UserInfo';\nimport { initializeProfile, loadProfile, startSubmitting } from './ProfilePage.slice';\n\nexport function ProfilePage() {\n  const { username } = useParams<{ username: string }>();\n  const favorites = useLocation().pathname.endsWith('favorites');\n\n  useEffect(() => {\n    onLoad(username, favorites);\n  }, [username]);\n\n  const { profile, submitting } = useStore(({ profile }) => profile);\n\n  return (\n    <div className='profile-page'>\n      {profile.match({\n        none: () => (\n          <div className='article-preview' key={1}>\n            Loading profile...\n          </div>\n        ),\n        some: (profile) => (\n          <UserInfo\n            user={profile}\n            disabled={submitting}\n            onFollowToggle={onFollowToggle(profile)}\n            onEditSettings={() => redirect('settings')}\n          />\n        ),\n      })}\n\n      <div className='container'>\n        <div className='row'>\n          <div className='col-xs-12 col-md-10 offset-md-1'>\n            <ArticlesViewer\n              toggleClassName='articles-toggle'\n              tabs={['My Articles', 'Favorited Articles']}\n              selectedTab={favorites ? 'Favorited Articles' : 'My Articles'}\n              onTabChange={onTabChange(username)}\n              onPageChange={onPageChange(username, favorites)}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nasync function onLoad(username: string, favorites: boolean) {\n  store.dispatch(initializeProfile());\n  store.dispatch(startLoadingArticles());\n\n  try {\n    const profile = await getProfile(username);\n    store.dispatch(loadProfile(profile));\n\n    const articles = await getArticlesByType(username, favorites);\n    store.dispatch(loadArticles(articles));\n  } catch {\n    location.href = '#/';\n  }\n}\n\nasync function getArticlesByType(username: string, favorites: boolean) {\n  const { currentPage } = store.getState().articleViewer;\n  return await getArticles({ [favorites ? 'favorited' : 'author']: username, offset: (currentPage - 1) * 10 });\n}\n\nfunction onFollowToggle(profile: Profile): () => void {\n  return async () => {\n    const { user } = store.getState().app;\n    if (user.isNone()) {\n      redirect('register');\n      return;\n    }\n\n    store.dispatch(startSubmitting());\n\n    const newProfile = await (profile.following ? unfollowUser : followUser)(profile.username);\n    store.dispatch(loadProfile(newProfile));\n  };\n}\n\nfunction onTabChange(username: string): (page: string) => void {\n  return async (page) => {\n    const favorited = page === 'Favorited Articles';\n    location.hash = `#/profile/${username}${!favorited ? '' : '/favorites'}`;\n    store.dispatch(startLoadingArticles());\n    store.dispatch(loadArticles(await getArticlesByType(username, favorited)));\n  };\n}\n\nfunction onPageChange(username: string, favorited: boolean): (index: number) => void {\n  return async (index) => {\n    store.dispatch(changePage(index));\n    store.dispatch(loadArticles(await getArticlesByType(username, favorited)));\n  };\n}\n","import { Option } from '@hqoss/monads';\nimport { format } from 'date-fns';\nimport React, { Fragment, useEffect } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport {\n  createComment,\n  deleteArticle,\n  deleteComment,\n  favoriteArticle,\n  followUser,\n  getArticle,\n  getArticleComments,\n  unfavoriteArticle,\n  unfollowUser,\n} from '../../../services/conduit';\nimport { store } from '../../../state/store';\nimport { useStore } from '../../../state/storeHooks';\nimport { Article } from '../../../types/article';\nimport { Comment } from '../../../types/comment';\nimport { redirect } from '../../../types/location';\nimport { classObjectToClassName } from '../../../types/style';\nimport { User } from '../../../types/user';\nimport { TagList } from '../../ArticlePreview/ArticlePreview';\nimport {\n  CommentSectionState,\n  initializeArticlePage,\n  loadArticle,\n  loadComments,\n  MetaSectionState,\n  startDeletingArticle,\n  startSubmittingComment,\n  startSubmittingFavorite,\n  startSubmittingFollow,\n  updateAuthor,\n  updateCommentBody,\n} from './ArticlePage.slice';\n\nexport function ArticlePage() {\n  const { slug } = useParams<{ slug: string }>();\n\n  const {\n    articlePage: { article, commentSection, metaSection },\n    app: { user },\n  } = useStore(({ articlePage, app }) => ({\n    articlePage,\n    app,\n  }));\n\n  useEffect(() => {\n    onLoad(slug);\n  }, [slug]);\n\n  return article.match({\n    none: () => <div>Loading article...</div>,\n    some: (article) => (\n      <div className='article-page'>\n        <ArticlePageBanner {...{ article, metaSection, user }} />\n\n        <div className='container page'>\n          <div className='row article-content'>\n            <div className='col-md-12'>{article.body}</div>\n            <TagList tagList={article.tagList} />\n          </div>\n\n          <hr />\n\n          <div className='article-actions'>\n            <ArticleMeta {...{ article, metaSection, user }} />\n          </div>\n\n          <CommentSection {...{ user, commentSection, article }} />\n        </div>\n      </div>\n    ),\n  });\n}\n\nasync function onLoad(slug: string) {\n  store.dispatch(initializeArticlePage());\n\n  try {\n    const article = await getArticle(slug);\n    store.dispatch(loadArticle(article));\n\n    const comments = await getArticleComments(slug);\n    store.dispatch(loadComments(comments));\n  } catch {\n    redirect('');\n  }\n}\n\nfunction ArticlePageBanner(props: { article: Article; metaSection: MetaSectionState; user: Option<User> }) {\n  return (\n    <div className='banner'>\n      <div className='container'>\n        <h1>{props.article.title}</h1>\n\n        <ArticleMeta {...props} />\n      </div>\n    </div>\n  );\n}\n\nfunction ArticleMeta({\n  article,\n  metaSection: { submittingFavorite, submittingFollow, deletingArticle },\n  user,\n}: {\n  article: Article;\n  metaSection: MetaSectionState;\n  user: Option<User>;\n}) {\n  return (\n    <div className='article-meta'>\n      <ArticleAuthorInfo article={article} />\n\n      {user.isSome() && user.unwrap().username === article.author.username ? (\n        <OwnerArticleMetaActions article={article} deletingArticle={deletingArticle} />\n      ) : (\n        <NonOwnerArticleMetaActions\n          article={article}\n          submittingFavorite={submittingFavorite}\n          submittingFollow={submittingFollow}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction ArticleAuthorInfo({\n  article: {\n    author: { username, image },\n    createdAt,\n  },\n}: {\n  article: Article;\n}) {\n  return (\n    <Fragment>\n      <Link to={`/profile/${username}`}>\n        <img src={image || undefined} />\n      </Link>\n      <div className='info'>\n        <Link className='author' to={`/profile/${username}`}>\n          {username}\n        </Link>\n        <span className='date'>{format(createdAt, 'PP')}</span>\n      </div>\n    </Fragment>\n  );\n}\n\nfunction NonOwnerArticleMetaActions({\n  article: {\n    slug,\n    favoritesCount,\n    favorited,\n    author: { username, following },\n  },\n  submittingFavorite,\n  submittingFollow,\n}: {\n  article: Article;\n  submittingFavorite: boolean;\n  submittingFollow: boolean;\n}) {\n  return (\n    <Fragment>\n      <button\n        className={classObjectToClassName({\n          btn: true,\n          'btn-sm': true,\n          'btn-outline-secondary': !following,\n          'btn-secondary': following,\n        })}\n        disabled={submittingFollow}\n        onClick={() => onFollow(username, following)}\n      >\n        <i className='ion-plus-round'></i>\n        &nbsp; {(following ? 'Unfollow ' : 'Follow ') + username}\n      </button>\n      &nbsp;\n      <button\n        className={classObjectToClassName({\n          btn: true,\n          'btn-sm': true,\n          'btn-outline-primary': !favorited,\n          'btn-primary': favorited,\n        })}\n        disabled={submittingFavorite}\n        onClick={() => onFavorite(slug, favorited)}\n      >\n        <i className='ion-heart'></i>\n        &nbsp; {(favorited ? 'Unfavorite ' : 'Favorite ') + 'Article'}\n        <span className='counter'>({favoritesCount})</span>\n      </button>\n    </Fragment>\n  );\n}\n\nasync function onFollow(username: string, following: boolean) {\n  if (store.getState().app.user.isNone()) {\n    redirect('register');\n    return;\n  }\n\n  store.dispatch(startSubmittingFollow());\n\n  const author = await (following ? unfollowUser : followUser)(username);\n  store.dispatch(updateAuthor(author));\n}\n\nasync function onFavorite(slug: string, favorited: boolean) {\n  if (store.getState().app.user.isNone()) {\n    redirect('register');\n    return;\n  }\n\n  store.dispatch(startSubmittingFavorite());\n\n  const article = await (favorited ? unfavoriteArticle : favoriteArticle)(slug);\n  store.dispatch(loadArticle(article));\n}\n\nfunction OwnerArticleMetaActions({\n  article: { slug },\n  deletingArticle,\n}: {\n  article: Article;\n  deletingArticle: boolean;\n}) {\n  return (\n    <Fragment>\n      <button className='btn btn-outline-secondary btn-sm' onClick={() => redirect(`editor/${slug}`)}>\n        <i className='ion-plus-round'></i>\n        &nbsp; Edit Article\n      </button>\n      &nbsp;\n      <button\n        className='btn btn-outline-danger btn-sm'\n        disabled={deletingArticle}\n        onClick={() => onDeleteArticle(slug)}\n      >\n        <i className='ion-heart'></i>\n        &nbsp; Delete Article\n      </button>\n    </Fragment>\n  );\n}\n\nasync function onDeleteArticle(slug: string) {\n  store.dispatch(startDeletingArticle());\n  await deleteArticle(slug);\n  redirect('');\n}\n\nfunction CommentSection({\n  user,\n  article,\n  commentSection: { submittingComment, commentBody, comments },\n}: {\n  user: Option<User>;\n  article: Article;\n  commentSection: CommentSectionState;\n}) {\n  return (\n    <div className='row'>\n      <div className='col-xs-12 col-md-8 offset-md-2'>\n        {user.match({\n          none: () => (\n            <p style={{ display: 'inherit' }}>\n              <Link to='/login'>Sign in</Link> or <Link to='/register'>sign up</Link> to add comments on this article.\n            </p>\n          ),\n          some: (user) => (\n            <CommentForm\n              user={user}\n              slug={article.slug}\n              submittingComment={submittingComment}\n              commentBody={commentBody}\n            />\n          ),\n        })}\n\n        {comments.match({\n          none: () => <div>Loading comments...</div>,\n          some: (comments) => (\n            <Fragment>\n              {comments.map((comment, index) => (\n                <ArticleComment key={comment.id} comment={comment} slug={article.slug} user={user} index={index} />\n              ))}\n            </Fragment>\n          ),\n        })}\n      </div>\n    </div>\n  );\n}\n\nfunction CommentForm({\n  user: { image },\n  commentBody,\n  slug,\n  submittingComment,\n}: {\n  user: User;\n  commentBody: string;\n  slug: string;\n  submittingComment: boolean;\n}) {\n  return (\n    <form className='card comment-form' onSubmit={onPostComment(slug, commentBody)}>\n      <div className='card-block'>\n        <textarea\n          className='form-control'\n          placeholder='Write a comment...'\n          rows={3}\n          onChange={onCommentChange}\n          value={commentBody}\n        ></textarea>\n      </div>\n      <div className='card-footer'>\n        <img src={image || undefined} className='comment-author-img' />\n        <button className='btn btn-sm btn-primary' disabled={submittingComment}>\n          Post Comment\n        </button>\n      </div>\n    </form>\n  );\n}\n\nfunction onCommentChange(ev: React.ChangeEvent<HTMLTextAreaElement>) {\n  store.dispatch(updateCommentBody(ev.target.value));\n}\n\nfunction onPostComment(slug: string, body: string): (ev: React.FormEvent) => void {\n  return async (ev) => {\n    ev.preventDefault();\n\n    store.dispatch(startSubmittingComment());\n    await createComment(slug, body);\n\n    store.dispatch(loadComments(await getArticleComments(slug)));\n  };\n}\n\nfunction ArticleComment({\n  comment: {\n    id,\n    body,\n    createdAt,\n    author: { username, image },\n  },\n  slug,\n  index,\n  user,\n}: {\n  comment: Comment;\n  slug: string;\n  index: number;\n  user: Option<User>;\n}) {\n  return (\n    <div className='card'>\n      <div className='card-block'>\n        <p className='card-text'>{body}</p>\n      </div>\n      <div className='card-footer'>\n        <Link className='comment-author' to={`/profile/${username}`}>\n          <img src={image || undefined} className='comment-author-img' />\n        </Link>\n        &nbsp;\n        <Link className='comment-author' to={`/profile/${username}`}>\n          {username}\n        </Link>\n        <span className='date-posted'>{format(createdAt, 'PP')}</span>\n        {user.isSome() && user.unwrap().username === username && (\n          <span className='mod-options'>\n            <i\n              className='ion-trash-a'\n              aria-label={`Delete comment ${index + 1}`}\n              onClick={() => onDeleteComment(slug, id)}\n            ></i>\n          </span>\n        )}\n      </div>\n    </div>\n  );\n}\n\nasync function onDeleteComment(slug: string, id: number) {\n  await deleteComment(slug, id);\n  store.dispatch(loadComments(await getArticleComments(slug)));\n}\n","import axios from 'axios';\nimport { Fragment } from 'react';\nimport { HashRouter, Redirect, Route, RouteProps, Switch } from 'react-router-dom';\nimport { getUser } from '../../services/conduit';\nimport { store } from '../../state/store';\nimport { useStoreWithInitializer } from '../../state/storeHooks';\nimport { EditArticle } from '../Pages/EditArticle/EditArticle';\nimport { Footer } from '../Footer/Footer';\nimport { Header } from '../Header/Header';\nimport { Home } from '../Pages/Home/Home';\nimport { Login } from '../Pages/Login/Login';\nimport { NewArticle } from '../Pages/NewArticle/NewArticle';\nimport { Register } from '../Pages/Register/Register';\nimport { Settings } from '../Pages/Settings/Settings';\nimport { endLoad, loadUser } from './App.slice';\nimport { ProfilePage } from '../Pages/ProfilePage/ProfilePage';\nimport { ArticlePage } from '../Pages/ArticlePage/ArticlePage';\n\nexport function App() {\n  const { loading, user } = useStoreWithInitializer(({ app }) => app, load);\n\n  const userIsLogged = user.isSome();\n\n  return (\n    <HashRouter>\n      {!loading && (\n        <Fragment>\n          <Header />\n          <Switch>\n            <GuestOnlyRoute exact path='/login' userIsLogged={userIsLogged}>\n              <Login />\n            </GuestOnlyRoute>\n            <GuestOnlyRoute exact path='/register' userIsLogged={userIsLogged}>\n              <Register />\n            </GuestOnlyRoute>\n            <UserOnlyRoute exact path='/settings' userIsLogged={userIsLogged}>\n              <Settings />\n            </UserOnlyRoute>\n            <UserOnlyRoute exact path='/editor' userIsLogged={userIsLogged}>\n              <NewArticle />\n            </UserOnlyRoute>\n            <UserOnlyRoute exact path='/editor/:slug' userIsLogged={userIsLogged}>\n              <EditArticle />\n            </UserOnlyRoute>\n            <Route path='/profile/:username'>\n              <ProfilePage />\n            </Route>\n            <Route path='/article/:slug'>\n              <ArticlePage />\n            </Route>\n            <Route exact path='/'>\n              <Home />\n            </Route>\n            <Route path='*'>\n              <Redirect to='/' />\n            </Route>\n          </Switch>\n          <Footer />\n        </Fragment>\n      )}\n    </HashRouter>\n  );\n}\n\nasync function load() {\n  const token = localStorage.getItem('token');\n  if (!store.getState().app.loading || !token) {\n    store.dispatch(endLoad());\n    return;\n  }\n  axios.defaults.headers.Authorization = `Token ${token}`;\n\n  try {\n    store.dispatch(loadUser(await getUser()));\n  } catch {\n    store.dispatch(endLoad());\n  }\n}\n\n/* istanbul ignore next */\nfunction GuestOnlyRoute({\n  children,\n  userIsLogged,\n  ...rest\n}: { children: JSX.Element | JSX.Element[]; userIsLogged: boolean } & RouteProps) {\n  return (\n    <Route {...rest}>\n      {children}\n      {userIsLogged && <Redirect to='/' />}\n    </Route>\n  );\n}\n\n/* istanbul ignore next */\nfunction UserOnlyRoute({\n  children,\n  userIsLogged,\n  ...rest\n}: { children: JSX.Element | JSX.Element[]; userIsLogged: boolean } & RouteProps) {\n  return (\n    <Route {...rest}>\n      {children}\n      {!userIsLogged && <Redirect to='/' />}\n    </Route>\n  );\n}\n","import ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './components/App/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}